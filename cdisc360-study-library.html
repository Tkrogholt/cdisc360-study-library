<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
</head>

<article class="guide">
    <carousel class="deck container-fluid">
        <slide class="row-fluid">
            <div class="col-sm-5">
                <h3>Neo4j CDISC 360 member training</h3>
                <img src="https://www.cdisc.org/system/files/all/CDISC_360/CDISC%20_360_Logo.png" alt="CDISC 360 logo" width="60%">
            </div>
            <div class="col-sm-7">
                <p>Before we can get started, first we must define a parameter containing the API key that the CDISC 360 project use to access CDISC library.</p>
                <p>As this code is publicly available (for now!), we can't keep the API key directly in the code.</p>

                <figure>
                    <figcaption>Run this piece of code with our API key substituted into the statement as noted</figcaption>
                    <pre class="pre-scrollable code runnable">
:params {C360auth: 'INSERT API KEY HERE - KEEP THE SINGLE QUOTES'}
                    </pre>
                </figure>
                <p>This statement will create the parameter named C360auth containing the information encompassed by the single quotes. A parameter can be compared to a SAS macro variable or in many other languages, simply a variable. A parameter is referenced by $name (in this case, $C360auth) and the remaining code statements can now be executed as-is, due to parameter usage.</p>
            </div>

        </slide>
        <slide class="row-fluid">
                <div class="col-sm-9">
                        <figure>
                            <pre class="pre-scrollable code runnable">
CALL apoc.load.jsonParams("https://library.cdisc.org/api/mdr/sdtmig/3-2/datasets",
{Authorization: "Basic "+<b class="text-danger">$C360auth</b>, Accept: "application/json"}, null) yield value as link1
UNWIND link1._links.datasets as dataset_list
WITH dataset_list 
// WHERE substring(dataset_list.href, 25) = 'DM'
CALL apoc.load.jsonParams("https://library.cdisc.org/api" + dataset_list.href,
{Authorization: "Basic "+<b class="text-danger">$C360auth</b>, Accept: "application/json"}, null) yield value as link2
WITH dataset_list, link2
CREATE (d:SDTMDataset {name: link2.name, label: link2.label, description: link2.description, structure: link2.datasetStructure, ordinal: link2.ordinal})
WITH dataset_list, link2, d
UNWIND link2.datasetVariables as dv
WITH dataset_list, link2, dv, d
CREATE (v:SDTMVariable {name: dv.name, label: dv.label, description: dv.description , role: dv.role , core: dv.core , data_type: dv.simpleDatatype})
WITH d, v
CREATE (d)-[:CONTAINS]->(v);</pre>
                            <figcaption>Find the produce category.</figcaption>
                        </figure>
                    </div>
        </slide>
    </carousel>    

</article>


</html>
